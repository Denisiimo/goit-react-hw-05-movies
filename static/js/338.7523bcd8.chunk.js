"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[338],{456:function(t,n,e){e.d(n,{AX:function(){return l},DF:function(){return f},KS:function(){return o},MX:function(){return s},dI:function(){return i}});var c=e(243),r="964aa706dab4c3295b22f686e0c720cc",a="movie";c.Z.defaults.baseURL="https://api.themoviedb.org/3/";var u=function(t){return c.Z.get(t).then((function(t){return t.data}))},o=function(){return u("".concat("movie/popular","?api_key=").concat(r))},i=function(t){var n=t.query,e=void 0===n?"trending":n,c=t.page,a=void 0===c?1:c;return u("".concat("search/movie","?api_key=").concat(r,"&query=").concat(e,"&").concat(a))},s=function(t){return u("".concat(a,"/").concat(t,"?api_key=").concat(r))},l=function(t){return u("".concat(a,"/").concat(t,"/").concat("credits","?api_key=").concat(r)).then((function(t){return t.cast.slice(0,10)}))},f=function(t){return u("".concat(a,"/").concat(t,"/").concat("reviews","?api_key=").concat(r)).then((function(t){return t.results.slice(0,10)}))}},338:function(t,n,e){e.r(n);var c=e(439),r=e(791),a=e(87),u=e(456),o=e(184),i=(0,r.lazy)((function(){return e.e(137).then(e.bind(e,137))})),s=(0,r.lazy)((function(){return e.e(442).then(e.bind(e,442))}));n.default=function(){var t=(0,a.lr)(),n=(0,c.Z)(t,2),e=n[0],l=n[1],f=(0,r.useState)(""),d=(0,c.Z)(f,2),p=d[0],h=d[1],v=(0,r.useState)(1),m=(0,c.Z)(v,2),g=m[0],y=m[1],k=(0,r.useState)([]),b=(0,c.Z)(k,2),_=b[0],S=b[1],j=e.get("query")||"",x=parseInt(e.get("page")||1);j!==p&&h(j),x!==g&&y(x),(0,r.useEffect)((function(){""===p?S({}):(0,u.dI)({query:p,page:g}).then(S)}),[p,g]);var q=function(t){null===t||void 0===t||t.preventDefault();var n=String(t.currentTarget.query.value).trim();""!==n&&l({query:n,page:1})};return _.total_results?(document.title="Movie search - ".concat(p),(0,o.jsxs)(r.Suspense,{fallback:(0,o.jsx)("p",{children:"Loading..."}),children:[(0,o.jsx)(i,{onSubmitHandler:q}),(0,o.jsx)(s,{filmList:_,state:{from:"/movies?query=".concat(p),addPath:""}})]})):(document.title="Movie search",(0,o.jsxs)(r.Suspense,{fallback:(0,o.jsx)("p",{children:"Loading..."}),children:[(0,o.jsx)(i,{onSubmitHandler:q}),0===(null===_||void 0===_?void 0:_.total_results)&&(0,o.jsx)("p",{children:"Nothing found"})]}))}}}]);
//# sourceMappingURL=338.7523bcd8.chunk.js.map